# Needed to enable Travis CI for gh-pages branches, see:
#   https://github.com/travis-ci/travis-core/pull/137
branches:
  only:
    - gh-pages

language: python
python:
  - "2.7"
  - "3.6"

script:
  - ./ci.py --pants-version unspecified
  - ./ci.py --pants-version pants.ini

osx_setup: &osx_setup
  os: osx

linux_setup: &linux_setup
  os: linux
  sudo: false

matrix:
  include:
    - name: "OSX 10.11 - El Capitan"
      <<: *osx_setup
      osx_image: xcode8.0

    - name: "OSX 10.12 - Sierra"
      <<: *osx_setup
      osx_image: xcode9.2

    - name: "OSX 10.13 - High Sierra"
      <<: *osx_setup
      osx_image: xcode9.4

    - name: "Ubuntu 12.04 - Precise"
      <<: *linux_setup
      dist: precise
      sudo: required

    - name: "Ubuntu 14.04 - Trusty"
      <<: *linux_setup
      dist: trusty
      env:
        # NB: Trusty image comes with Python 3.4 installed, but we require 3.6+.
        # Force 3.6 to the front of the PATH so it gets resolved by ci.py correctly.
        - PATH="/opt/pyenv/shims/python3.6:${PATH}"

    - name: "Ubuntu 16.04 - Xenial"
      <<: *linux_setup
      dist: xenial
